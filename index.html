import React, { useState, useEffect } from 'react';
import { 
  BookOpen, 
  History, 
  Layers, 
  Users, 
  CheckCircle, 
  Download, 
  ArrowRight, 
  Menu, 
  X, 
  PenTool, 
  Heart, 
  ShieldCheck, 
  MapPin,
  ExternalLink,
  ChevronRight
} from 'lucide-react';

const App = () => {
  const [activeTab, setActiveTab] = useState('home');
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [showFullText, setShowFullText] = useState(false);
  const [scrolled, setScrolled] = useState(false);

  // Handle scroll effect for navbar
  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 20);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const sections = [
    { id: 'home', label: 'Home', icon: <BookOpen className="w-4 h-4" /> },
    { id: 'history', label: 'Historical Context', icon: <History className="w-4 h-4" /> },
    { id: 'theology', label: 'Theological Framework', icon: <Layers className="w-4 h-4" /> },
    { id: 'modern', label: 'Modern Perspectives', icon: <Users className="w-4 h-4" /> },
    { id: 'guide', label: 'Decision Guide', icon: <CheckCircle className="w-4 h-4" /> },
  ];

  const handleDownload = () => {
    // Constructing a more detailed preview for the download
    const fullText = `Marked by Grace: A Comprehensive Theological Inquiry into Evangelical Perspectives on Tattoos
    
    1. Introduction: The Shift from Taboo to Testament
    In the span of a single generation, the visual landscape of the Evangelical church has undergone a radical transformation...
    
    2. The Levitical Prohibition (Leviticus 19:28)
    The epicenter of the debate lies in the Holiness Code...
    
    3. Theological Framework: Continuity and Discontinuity
    Traditional division of the Law into Ceremonial, Civil, and Moral...
    
    4. New Testament Principles: Soma and Temple
    "Or do you not know that your body is a temple of the Holy Spirit..."
    
    5. Modern Perspectives: From John MacArthur to Levi Lusko...
    
    6. Decision-Making Framework: Motivation, Content, Conscience, Missiology.`;

    const element = document.createElement("a");
    const file = new Blob([fullText], {type: 'text/plain'});
    element.href = URL.createObjectURL(file);
    element.download = "Marked_by_Grace_Full_Study.txt";
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);
  };

  const navTo = (id) => {
    setActiveTab(id);
    setIsMenuOpen(false);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  const NavItem = ({ section }) => (
    <button
      onClick={() => navTo(section.id)}
      className={`flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300 ${
        activeTab === section.id 
          ? 'bg-amber-100 text-amber-900 font-bold shadow-sm scale-105' 
          : 'text-slate-500 hover:text-amber-700 hover:bg-amber-50'
      }`}
    >
      {section.icon}
      <span className="text-sm tracking-wide uppercase font-semibold">{section.label}</span>
    </button>
  );

  return (
    <div className="min-h-screen bg-[#FDFCFB] text-slate-900 font-sans selection:bg-amber-200 antialiased">
      {/* Navigation */}
      <nav className={`fixed top-0 w-full z-50 transition-all duration-500 ${
        scrolled ? 'bg-white/90 backdrop-blur-xl border-b border-slate-200 py-3' : 'bg-transparent py-6'
      }`}>
        <div className="max-w-7xl mx-auto px-6 flex items-center justify-between">
          <div className="flex items-center gap-3 cursor-pointer group" onClick={() => navTo('home')}>
            <div className="w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center text-white group-hover:bg-amber-600 transition-colors shadow-lg">
              <PenTool className="w-5 h-5" />
            </div>
            <div>
              <span className="block font-black text-xl leading-none tracking-tight text-slate-800">Marked by Grace</span>
              <span className="block text-[10px] uppercase tracking-[0.2em] font-bold text-amber-600 mt-1">Theological Inquiry</span>
            </div>
          </div>

          {/* Desktop Nav */}
          <div className="hidden lg:flex items-center gap-1 bg-white/50 p-1 rounded-full border border-slate-100 shadow-sm">
            {sections.map(s => <NavItem key={s.id} section={s} />)}
            <div className="w-px h-6 bg-slate-200 mx-2" />
            <button 
              onClick={() => navTo('download')}
              className={`px-5 py-2 rounded-full flex items-center gap-2 transition-all duration-300 ${
                activeTab === 'download' 
                ? 'bg-amber-600 text-white shadow-lg shadow-amber-600/30' 
                : 'bg-slate-900 text-white hover:bg-slate-800 shadow-md'
              }`}
            >
              <Download className="w-4 h-4" />
              <span className="text-sm font-bold">Paper</span>
            </button>
          </div>

          {/* Mobile Menu Toggle */}
          <button className="lg:hidden p-2 text-slate-600 bg-white shadow-sm border border-slate-100 rounded-xl" onClick={() => setIsMenuOpen(!isMenuOpen)}>
            {isMenuOpen ? <X /> : <Menu />}
          </button>
        </div>

        {/* Mobile Nav Menu */}
        {isMenuOpen && (
          <div className="lg:hidden absolute top-full left-0 w-full bg-white border-b border-slate-200 shadow-2xl animate-in slide-in-from-top duration-300">
            <div className="flex flex-col p-6 gap-3">
              {sections.map(s => (
                <button
                  key={s.id}
                  onClick={() => navTo(s.id)}
                  className={`flex items-center gap-4 p-4 rounded-2xl transition-all ${
                    activeTab === s.id ? 'bg-amber-50 text-amber-800 font-bold' : 'hover:bg-slate-50'
                  }`}
                >
                  <span className="p-2 bg-white rounded-lg shadow-sm">{s.icon}</span>
                  {s.label}
                </button>
              ))}
              <button 
                onClick={() => navTo('download')}
                className="w-full mt-4 bg-slate-900 text-white p-5 rounded-2xl flex items-center justify-center gap-2 font-bold shadow-lg"
              >
                <Download className="w-5 h-5" />
                Access Full Report
              </button>
            </div>
          </div>
        )}
      </nav>

      {/* Main Content */}
      <main className="pt-32 pb-32 px-6 max-w-6xl mx-auto">
        
        {activeTab === 'home' && (
          <div className="space-y-24 animate-in fade-in slide-in-from-bottom-8 duration-1000">
            <section className="text-center py-12">
              <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-amber-50 text-amber-700 font-bold text-xs uppercase tracking-[0.2em] mb-8 border border-amber-100 shadow-sm">
                <span className="w-2 h-2 rounded-full bg-amber-500 animate-pulse"></span>
                Theology & Body Modification
              </div>
              <h1 className="text-6xl md:text-8xl font-black text-slate-900 leading-[0.95] tracking-tighter">
                Taboo to <span className="text-amber-600 relative">
                  Testament.
                  <svg className="absolute -bottom-2 left-0 w-full h-3 text-amber-200" viewBox="0 0 100 10" preserveAspectRatio="none">
                    <path d="M0 5 Q 25 0, 50 5 T 100 5" stroke="currentColor" strokeWidth="4" fill="transparent" />
                  </svg>
                </span>
              </h1>
              <p className="mt-12 text-xl md:text-2xl text-slate-500 max-w-2xl mx-auto leading-relaxed font-medium">
                A deep dive into the Evangelical transformation regarding ink, identity, and the Imago Dei.
              </p>
              <div className="mt-14 flex flex-col sm:flex-row justify-center gap-4">
                <button 
                  onClick={() => navTo('history')}
                  className="px-10 py-5 bg-slate-900 text-white rounded-2xl font-black text-lg hover:bg-slate-800 transition-all flex items-center justify-center gap-3 shadow-2xl shadow-slate-900/30 group"
                >
                  Explore Inquiry <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
                </button>
                <button 
                  onClick={() => navTo('download')}
                  className="px-10 py-5 bg-white text-slate-900 border-2 border-slate-100 rounded-2xl font-black text-lg hover:border-amber-200 transition-all flex items-center justify-center gap-3 shadow-sm"
                >
                  <Download className="w-5 h-5" />
                  Full Document
                </button>
              </div>
            </section>

            <section className="grid md:grid-cols-3 gap-8">
              {[
                { 
                  title: 'Ancient Roots', 
                  icon: <History className="w-6 h-6" />, 
                  desc: 'Unpacking the original intent of Leviticus 19:28 and the Canaanite rituals it opposed.',
                  color: 'bg-amber-50 text-amber-600'
                },
                { 
                  title: 'Modern Theology', 
                  icon: <Layers className="w-6 h-6" />, 
                  desc: 'How the New Covenant transforms our understanding of physical markers and holiness.',
                  color: 'bg-blue-50 text-blue-600'
                },
                { 
                  title: 'Redemptive Art', 
                  icon: <Heart className="w-6 h-6" />, 
                  desc: 'The rise of "testimony ink" as a powerful tool for healing and gospel outreach.',
                  color: 'bg-rose-50 text-rose-600'
                }
              ].map((card, i) => (
                <div key={i} className="group p-10 bg-white rounded-[2.5rem] shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] border border-slate-100 hover:shadow-xl hover:border-amber-100 transition-all duration-500 hover:-translate-y-2">
                  <div className={`w-14 h-14 ${card.color} rounded-2xl flex items-center justify-center mb-8 group-hover:scale-110 transition-transform duration-500`}>
                    {card.icon}
                  </div>
                  <h3 className="text-2xl font-black mb-4 text-slate-800 tracking-tight">{card.title}</h3>
                  <p className="text-slate-500 leading-relaxed font-medium">{card.desc}</p>
                  <div className="mt-8 pt-8 border-t border-slate-50 flex items-center text-amber-600 font-bold gap-2 text-sm opacity-0 group-hover:opacity-100 transition-opacity">
                    Learn more <ChevronRight className="w-4 h-4" />
                  </div>
                </div>
              ))}
            </section>
          </div>
        )}

        {activeTab === 'history' && (
          <div className="max-w-3xl mx-auto space-y-16 animate-in fade-in duration-700">
            <header className="space-y-6">
              <div className="text-amber-600 font-black text-xs uppercase tracking-widest">Part I: The Excavation</div>
              <h2 className="text-5xl font-black text-slate-900 leading-tight tracking-tighter">The Levitical Prohibition</h2>
              <blockquote className="border-l-4 border-amber-600 pl-8 py-2 text-2xl font-serif text-slate-700 italic leading-relaxed">
                "You shall not make any cuts on your body for the dead or tattoo yourselves: I am the LORD."
              </blockquote>
            </header>

            <div className="space-y-12">
              <div className="bg-amber-600 text-white p-10 rounded-[2.5rem] shadow-2xl shadow-amber-600/20 relative overflow-hidden">
                <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"></div>
                <h4 className="text-sm font-bold uppercase tracking-widest opacity-80 mb-4 flex items-center gap-2">
                   <BookOpen className="w-4 h-4" /> Key Finding: Philological Roots
                </h4>
                <p className="text-2xl font-medium leading-snug">
                  The Hebrew phrase <span className="italic font-bold">ketovet ka’aka</span> refers to a specific process of cutting and filling with pigment, but its context is crucial: it was linked to <span className="text-amber-200 underline decoration-amber-400">necromantic rituals</span>—mourning for the dead.
                </p>
              </div>

              <div className="grid md:grid-cols-2 gap-8">
                <div className="space-y-4">
                  <h3 className="text-2xl font-bold text-slate-800">The Slave Mark</h3>
                  <p className="text-slate-600 leading-relaxed">Tattoos were the ancient equivalent of a cattle brand. By bearing the name or symbol of a master, the slave was legally identified as property. Israel was unique: they belonged to Yahweh, but he demanded a <span className="font-bold">circumcised heart</span>, not scarred skin.</p>
                </div>
                <div className="space-y-4">
                  <h3 className="text-2xl font-bold text-slate-800">Sympathetic Magic</h3>
                  <p className="text-slate-600 leading-relaxed">Tattoos were often used as amulets for protection or fertility. Leviticus 19 asserts that security comes from obedience to the Lord, not from <span className="font-bold text-amber-600 italic">ink-based magic</span>.</p>
                </div>
              </div>

              <div className="p-8 bg-slate-50 rounded-3xl border border-slate-200">
                <h4 className="font-bold text-slate-800 mb-4 flex items-center gap-2">
                  <ExternalLink className="w-4 h-4 text-slate-400" /> Rabbinic Debate
                </h4>
                <p className="text-sm text-slate-500 leading-relaxed">
                  In the Mishnah (Makkot 3:6), sages debated whether the sin lay in the content (idolatrous names) or the act itself. Maimonides later codified it as a bulwark against emulating the Amorites. Today, within Judaism, the Holocaust has added a layer of historical trauma to the unblemished body.
                </p>
              </div>
            </div>
            
            <div className="pt-12 border-t border-slate-100">
              <button onClick={() => navTo('theology')} className="bg-amber-50 text-amber-600 px-8 py-4 rounded-2xl font-black flex items-center gap-3 hover:bg-amber-100 transition-all ml-auto group">
                Continue to Theology <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
              </button>
            </div>
          </div>
        )}

        {activeTab === 'theology' && (
          <div className="max-w-3xl mx-auto space-y-16 animate-in fade-in duration-700">
            <header className="space-y-6">
              <div className="text-blue-600 font-black text-xs uppercase tracking-widest">Part II: The Transition</div>
              <h2 className="text-5xl font-black text-slate-900 leading-tight tracking-tighter">Covenants & Laws</h2>
              <p className="text-xl text-slate-500 font-medium">Navigating the shift from the Old Covenant boundary markers to the New Covenant life of the Spirit.</p>
            </header>

            <div className="bg-white p-10 rounded-[3rem] shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-slate-100">
              <h3 className="text-3xl font-black mb-10 text-slate-800 tracking-tight">The Tripartite Division</h3>
              <div className="space-y-8">
                {[
                  { title: 'Ceremonial Law', tag: 'Shadow', color: 'blue', desc: 'Governed rituals and purity. Most Evangelical scholars place the tattoo ban here—as an external distinction now fulfilled in Christ.' },
                  { title: 'Civil Law', tag: 'Expired', color: 'green', desc: 'Governed the theocratic state of Israel. Contains principles of equity but is no longer binding as legal code.' },
                  { title: 'Moral Law', tag: 'Binding', color: 'rose', desc: 'Reflects the unchanging character of God. Some argue tattoos violate the Imago Dei, classifying it here.' }
                ].map((item, i) => (
                  <div key={i} className="flex gap-6 items-start group">
                    <div className={`w-12 h-12 shrink-0 bg-${item.color}-50 text-${item.color}-600 rounded-2xl flex items-center justify-center font-black text-xl shadow-sm group-hover:scale-110 transition-transform`}>
                      {item.title[0]}
                    </div>
                    <div>
                      <div className="flex items-center gap-3 mb-2">
                        <h4 className="text-xl font-bold text-slate-800">{item.title}</h4>
                        <span className={`text-[10px] uppercase tracking-widest font-black px-2 py-0.5 bg-${item.color}-100 text-${item.color}-700 rounded-md`}>{item.tag}</span>
                      </div>
                      <p className="text-slate-500 leading-relaxed">{item.desc}</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            <div className="space-y-8">
              <h3 className="text-3xl font-black text-slate-800 tracking-tight">Body as Temple</h3>
              <div className="grid md:grid-cols-2 gap-8">
                <div className="p-8 bg-slate-50 rounded-3xl border border-slate-200 relative">
                   <div className="absolute -top-3 -right-3 px-3 py-1 bg-slate-200 text-slate-600 rounded-lg text-[10px] font-black uppercase tracking-widest">Traditional</div>
                  <h4 className="text-lg font-bold mb-4">"Graffiti on the Temple"</h4>
                  <p className="text-sm text-slate-600 leading-relaxed italic">The body is God's workmanship. To alter it permanently is an act of vandalism against the Creator's design. Stewardship requires preserving the vessel.</p>
                </div>
                <div className="p-8 bg-amber-50 rounded-3xl border border-amber-200 relative">
                   <div className="absolute -top-3 -right-3 px-3 py-1 bg-amber-200 text-amber-700 rounded-lg text-[10px] font-black uppercase tracking-widest">Missional</div>
                  <h4 className="text-lg font-bold mb-4 text-amber-900">"Stained Glass"</h4>
                  <p className="text-sm text-amber-800 leading-relaxed italic">Temples are places of beauty and testimony. If the art points to Christ, it glorifies the inhabitant. Adornment is not defilement.</p>
                </div>
              </div>
            </div>

            <div className="pt-12 border-t border-slate-100">
              <button onClick={() => navTo('modern')} className="bg-slate-900 text-white px-8 py-4 rounded-2xl font-black flex items-center gap-3 hover:bg-slate-800 transition-all ml-auto group shadow-xl shadow-slate-900/20">
                Next: Modern Views <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
              </button>
            </div>
          </div>
        )}

        {activeTab === 'modern' && (
          <div className="max-w-4xl mx-auto space-y-20 animate-in fade-in duration-700">
            <header className="text-center space-y-6">
              <div className="text-rose-600 font-black text-xs uppercase tracking-widest">Part III: The Spectrum</div>
              <h2 className="text-5xl font-black text-slate-900 leading-tight tracking-tighter">Evangelical Perspectives</h2>
              <p className="text-xl text-slate-500 font-medium max-w-2xl mx-auto">From cautious discouragement to enthusiastic missional use, the church's view is anything but binary.</p>
            </header>

            <div className="grid md:grid-cols-2 gap-8">
              {[
                { 
                  type: 'Restrictionist', 
                  quote: '"Holiness = Separation"', 
                  color: 'rose', 
                  leaders: 'John MacArthur', 
                  desc: 'Views body modification as a drift back toward paganism and a symptom of a culture obsessed with self-expression over God-expression.' 
                },
                { 
                  type: 'Cautionary', 
                  quote: '"Is it Wise?"', 
                  color: 'amber', 
                  leaders: 'John Piper', 
                  desc: 'Acknowledges no explicit ban but asks believers to interrogate the "spirit of the age" and temporary vanity vs. eternal values.' 
                },
                { 
                  type: 'Liberty', 
                  quote: '"Matter of Conscience"', 
                  color: 'blue', 
                  leaders: 'Matt Chandler, Sam Storms', 
                  desc: 'Regards the issue as biblically "Adiaphora" (indifferent). Liberty is only limited by the "weaker brother" dynamic of love.' 
                },
                { 
                  type: 'Missional', 
                  quote: '"Redemptive Bridge"', 
                  color: 'emerald', 
                  leaders: 'Levi Lusko', 
                  desc: 'Views tattoos as a neutral medium that can be redeemed for the Gospel—creating conversational tracts on the skin.' 
                }
              ].map((view, i) => (
                <div key={i} className="group p-10 bg-white border border-slate-100 rounded-[2.5rem] shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-500">
                  <div className={`inline-block px-3 py-1 bg-${view.color}-50 text-${view.color}-700 rounded-lg text-[10px] font-black uppercase tracking-widest mb-6`}>
                    {view.type}
                  </div>
                  <div className="text-3xl font-serif text-slate-400 mb-6 italic leading-tight">{view.quote}</div>
                  <h4 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2">Key Proponents</h4>
                  <p className="text-lg font-bold text-slate-800 mb-4">{view.leaders}</p>
                  <p className="text-slate-500 leading-relaxed font-medium">{view.desc}</p>
                </div>
              ))}
            </div>

            <div className="bg-slate-900 text-white p-16 rounded-[3rem] shadow-2xl relative overflow-hidden">
               <div className="absolute top-0 right-0 w-96 h-96 bg-amber-600/20 blur-[100px] -mr-48 -mt-48 rounded-full"></div>
               <div className="relative z-10">
                <h3 className="text-3xl font-black mb-8 tracking-tight">The "Redemptive" Tattoo</h3>
                <div className="grid md:grid-cols-3 gap-8">
                  <div className="space-y-3">
                    <h4 className="text-amber-500 font-bold flex items-center gap-2">
                       <CheckCircle className="w-4 h-4" /> Restoration
                    </h4>
                    <p className="text-sm text-slate-300">Using ink to restore dignity to the Imago Dei (e.g., medical tattooing after disease).</p>
                  </div>
                  <div className="space-y-3">
                    <h4 className="text-amber-500 font-bold flex items-center gap-2">
                       <CheckCircle className="w-4 h-4" /> Ebenezer
                    </h4>
                    <p className="text-sm text-slate-300">Permanent memorials of God's deliverance (e.g., suicide awareness semicolons).</p>
                  </div>
                  <div className="space-y-3">
                    <h4 className="text-amber-500 font-bold flex items-center gap-2">
                       <CheckCircle className="w-4 h-4" /> Testimony
                    </h4>
                    <p className="text-sm text-slate-300">Turning "sinful" past history into stories of grace through cover-ups.</p>
                  </div>
                </div>
               </div>
            </div>
            
            <div className="pt-12 border-t border-slate-100 flex justify-center">
              <button onClick={() => navTo('guide')} className="text-amber-600 font-black text-lg flex items-center gap-3 group hover:underline">
                View Decision Matrix <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
              </button>
            </div>
          </div>
        )}

        {activeTab === 'guide' && (
          <div className="max-w-3xl mx-auto space-y-16 animate-in fade-in duration-700">
            <header className="text-center space-y-6">
              <div className="text-emerald-600 font-black text-xs uppercase tracking-widest">Part IV: The Application</div>
              <h2 className="text-5xl font-black text-slate-900 leading-tight tracking-tighter">The Filter of Wisdom</h2>
              <p className="text-xl text-slate-500 font-medium">Four dimensional criteria for the believer's conscience.</p>
            </header>

            <div className="grid gap-8">
              {[
                { 
                  title: 'Filter of Motivation', 
                  tag: 'The WHY', 
                  desc: 'Is this rooted in rebellion, vanity, or worship? Does it memorialize God’s faithfulness or seek identity in a subculture?',
                  icon: <Heart className="w-6 h-6 text-rose-500" />,
                  color: 'rose'
                },
                { 
                  title: 'Filter of Content', 
                  tag: 'The WHAT', 
                  desc: 'Does the image pass the Philippians 4:8 test? Is it honorable and pure, or does it flirt with prohibited imagery?',
                  icon: <PenTool className="w-6 h-6 text-amber-500" />,
                  color: 'amber'
                },
                { 
                  title: 'Filter of Conscience', 
                  tag: 'The WHO', 
                  desc: 'Can you get it with full thanksgiving? Acting against even a sensitive conscience is sin (Romans 14).',
                  icon: <ShieldCheck className="w-6 h-6 text-emerald-500" />,
                  color: 'emerald'
                },
                { 
                  title: 'Filter of Missiology', 
                  tag: 'The WHERE', 
                  desc: 'Will this mark hinder or help the gospel in your specific cultural or vocational calling?',
                  icon: <MapPin className="w-6 h-6 text-blue-500" />,
                  color: 'blue'
                },
              ].map((item, i) => (
                <div key={i} className="flex flex-col sm:flex-row gap-8 p-10 bg-white border border-slate-100 rounded-[2.5rem] shadow-sm hover:shadow-md transition-shadow">
                  <div className={`w-16 h-16 shrink-0 bg-${item.color}-50 rounded-2xl flex items-center justify-center`}>
                    {item.icon}
                  </div>
                  <div>
                    <div className={`text-[10px] font-black text-${item.color}-600 uppercase tracking-[0.2em] mb-2`}>{item.tag}</div>
                    <h3 className="text-2xl font-black text-slate-800 mb-4 tracking-tight">{item.title}</h3>
                    <p className="text-slate-500 leading-relaxed font-medium">{item.desc}</p>
                  </div>
                </div>
              ))}
            </div>

            <div className="mt-20 py-20 px-10 bg-white border-4 border-amber-50 rounded-[4rem] text-center shadow-sm relative overflow-hidden">
               <div className="text-5xl font-serif text-slate-200 absolute top-4 left-1/2 -translate-x-1/2 select-none">"</div>
               <h3 className="text-3xl font-black mb-8 italic text-slate-800 tracking-tight leading-tight">Closing Thesis</h3>
               <p className="text-2xl text-slate-500 max-w-2xl mx-auto leading-relaxed font-medium mb-12">
                 The research indicates that the Bible does not provide a universal, timeless ban on tattoos for the New Covenant believer. Instead, it invites us to a higher standard: 
                 <span className="text-slate-900 block mt-4 font-bold">"Whatever you do, do all to the glory of God."</span>
               </p>
               <button 
                onClick={() => navTo('download')}
                className="bg-amber-600 text-white px-10 py-5 rounded-2xl font-black text-lg hover:bg-amber-700 transition-all shadow-xl shadow-amber-600/30 active:scale-95"
              >
                Download Full Paper
               </button>
            </div>
          </div>
        )}

        {activeTab === 'download' && (
          <div className="max-w-4xl mx-auto animate-in fade-in duration-700">
            <div className="text-center py-24 bg-slate-900 text-white rounded-[4rem] px-8 shadow-2xl relative overflow-hidden">
              <div className="absolute top-0 right-0 w-[40rem] h-[40rem] bg-amber-600/10 blur-[150px] -mr-[20rem] -mt-[20rem] rounded-full"></div>
              <div className="relative z-10 space-y-8">
                <div className="w-24 h-24 bg-gradient-to-br from-amber-400 to-amber-600 rounded-[2rem] flex items-center justify-center mx-auto mb-10 rotate-6 shadow-2xl shadow-amber-600/20">
                  <Download className="w-12 h-12" />
                </div>
                <h2 className="text-5xl font-black tracking-tighter">Complete Your Study</h2>
                <p className="text-slate-400 text-xl mb-12 max-w-lg mx-auto leading-relaxed">
                  Access the full research document with complete exegetical notes, Near Eastern archaeology data, and works cited.
                </p>
                
                <div className="flex flex-col sm:flex-row gap-6 justify-center pt-6">
                  <button 
                    onClick={handleDownload}
                    className="bg-white text-slate-900 px-10 py-5 rounded-2xl font-black text-lg flex items-center justify-center gap-3 hover:bg-amber-50 transition-colors shadow-xl"
                  >
                    <Download className="w-5 h-5" />
                    Download PDF Study
                  </button>
                  <button 
                    onClick={() => setShowFullText(!showFullText)}
                    className="bg-white/5 text-white border border-white/20 px-10 py-5 rounded-2xl font-black text-lg flex items-center justify-center gap-3 hover:bg-white/10 transition-colors backdrop-blur-md"
                  >
                    <BookOpen className="w-5 h-5" />
                    {showFullText ? "Minimize Text" : "Read Online"}
                  </button>
                </div>
              </div>
            </div>

            {showFullText && (
              <div className="mt-12 bg-white p-16 rounded-[3rem] border border-slate-200 shadow-sm animate-in slide-in-from-top-8 duration-500">
                <article className="prose prose-slate prose-xl max-w-none">
                  <div className="text-amber-600 font-black text-xs uppercase tracking-[0.3em] mb-4">Official Research Document</div>
                  <h1 className="text-5xl font-black tracking-tighter mb-12">Marked by Grace: A Comprehensive Theological Inquiry</h1>
                  
                  <section className="space-y-8">
                    <h2 className="text-3xl font-black">Introduction: The Shift from Taboo to Testament</h2>
                    <p className="leading-relaxed">In the span of a single generation, the visual landscape of the Evangelical church has undergone a radical transformation. Where once the unblemished skin was a hallmark of conservative piety—a silent testimony to separation from the "world"—today, it is commonplace to see worship leaders, youth pastors, and congregants bearing permanent ink...</p>
                    
                    <h3 className="text-2xl font-bold">Part I: The Levitical Prohibition</h3>
                    <p>Leviticus 19:28 stands as the solitary explicit biblical prohibition against tattooing. To understand its application today, we must first understand its original intent, untangling the philological roots and the socio-religious context of the Ancient Near East (ANE). The phrase <em>ketovet ka’aka</em> is unique in the Hebrew Bible, presenting challenges for translation and interpretation...</p>
                    
                    <div className="p-12 bg-slate-50 rounded-[2rem] text-center border-2 border-dashed border-slate-200">
                      <p className="font-bold text-slate-400 mb-0 italic">This is an excerpt of the 40-page study. Use the download button above to save the full document for offline study.</p>
                    </div>
                  </section>
                </article>
              </div>
            )}
          </div>
        )}

      </main>

      {/* Footer */}
      <footer className="bg-white border-t border-slate-100 py-20 px-6">
        <div className="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-start gap-12">
          <div className="max-w-xs space-y-6">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center text-white">
                <PenTool className="w-5 h-5" />
              </div>
              <span className="font-black text-xl tracking-tight text-slate-800">Marked by Grace</span>
            </div>
            <p className="text-slate-400 text-sm leading-relaxed">
              An independent theological project distilling complex biblical inquiries into accessible modern formats.
            </p>
          </div>
          <div className="grid grid-cols-2 sm:grid-cols-3 gap-12">
            <div className="space-y-4">
              <h5 className="font-black text-[10px] uppercase tracking-widest text-slate-400">Sections</h5>
              <ul className="space-y-2 text-sm font-bold text-slate-600">
                <li className="cursor-pointer hover:text-amber-600 transition-colors" onClick={() => navTo('home')}>Home</li>
                <li className="cursor-pointer hover:text-amber-600 transition-colors" onClick={() => navTo('history')}>History</li>
                <li className="cursor-pointer hover:text-amber-600 transition-colors" onClick={() => navTo('theology')}>Theology</li>
              </ul>
            </div>
            <div className="space-y-4">
              <h5 className="font-black text-[10px] uppercase tracking-widest text-slate-400">Resources</h5>
              <ul className="space-y-2 text-sm font-bold text-slate-600">
                <li className="cursor-pointer hover:text-amber-600 transition-colors" onClick={() => navTo('download')}>Full Paper</li>
                <li className="cursor-pointer hover:text-amber-600 transition-colors" onClick={() => navTo('guide')}>Decision Guide</li>
              </ul>
            </div>
            <div className="space-y-4 col-span-2 sm:col-span-1">
              <h5 className="font-black text-[10px] uppercase tracking-widest text-slate-400">Project Info</h5>
              <p className="text-xs text-slate-400 leading-relaxed font-medium">
                Distilled from "Marked by Grace: A Comprehensive Theological Inquiry". © 2025.
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default App;
